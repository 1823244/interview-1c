https://its.1c.ru/db/metod8dev/content/2334/hdoc  
https://its.1c.ru/db/metod8dev#content:2313:hdoc  


// Как отработает код (вложенные транзакции) ?  
	- ошибок не будет, т.к. ошибка перехватывается  
// Что будет выведено в методе Сообщить ?	
	- "вложенная транзакция"  
// Появится ли новый объект в базе ?   
	- нет  

// Если раскомментировать отмену вложенной транзакции - упадем с ошибкой на  
// второй отмене транзакции. Причина - 1С не поддерживает вложенные транзакции  
// и отменяет сразу весь вложенный стэк.  

```
Процедура ВложеннаяТранзакция() Экспорт
	
	НачатьТранзакцию();
	
	Попытка
		
		новыйЭл = Справочники.Контрагенты.СоздатьЭлемент();
		новыйЭл.ОбменДанными.Загрузка = истина;
		новыйЭл.Наименование = "вложенная транзакция";
		новыйЭл.Записать();
		
		НачатьТранзакцию();
		
		Попытка
			
			а=1/0;
			
		Исключение
			Если ТранзакцияАктивна() Тогда
				//ОтменитьТранзакцию();
			КонецЕсли; 
		    
		КонецПопытки;
		 
	    ЗафиксироватьТранзакцию();
		
	Исключение
	    
	КонецПопытки;
	
	н = Справочники.Контрагенты.НайтиПоНаименованию("вложенная транзакция");
	сообщить("новый контрагент: "+строка(н));
	
	СУУ_УниверсальныеСервер.Пауза(9);
	
	// что выведется в методе Сообщить ? - "вложенная транзакция"
	// другие увидят новый объект ? - нет
	
	ОтменитьТранзакцию();
		
КонецПроцедуры
 
```

```
// почему не запишется новый объект?
//
//
// Причина - 1С не поддерживает вложенные транзакции
// и отменяет сразу весь вложенный стэк.
//
Процедура ВложеннаяТранзакция() Экспорт
	
	НачатьТранзакцию();
	
	Попытка
		
		новыйЭл = Справочники.Контрагенты.СоздатьЭлемент();
		новыйЭл.ОбменДанными.Загрузка = истина;
		новыйЭл.Наименование = "вложенная транзакция";
		новыйЭл.Записать();
		
		НачатьТранзакцию();
		
		Попытка
			
			а=1/0;
			
		Исключение
			Если ТранзакцияАктивна() Тогда
				ОтменитьТранзакцию();
			КонецЕсли; 
		    
		КонецПопытки;
		 
	    ЗафиксироватьТранзакцию();
		
	Исключение
	    
	КонецПопытки;
	
	н = Справочники.Контрагенты.НайтиПоНаименованию("вложенная транзакция");
	сообщить("новый контрагент: "+строка(н));
	
	СУУ_УниверсальныеСервер.Пауза(9);
	
	// что выведется в методе Сообщить ? - "вложенная транзакция"
	// другие увидят новый объект ? - нет
	
	//ОтменитьТранзакцию();
		
КонецПроцедуры
 
		
```